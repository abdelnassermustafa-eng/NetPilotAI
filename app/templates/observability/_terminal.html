<!-- ================= TERMINAL SECTION ================= -->
<div x-show="observabilitySection === 'terminal'" x-cloak class="space-y-4">

  <!-- HEADER -->
  <h3 class="text-base font-semibold text-slate-800">üñ•Ô∏è Terminal</h3>

  <!-- DISCLAIMER (ALWAYS SHOWN FIRST) -->
  <div class="rounded-lg border border-amber-200 bg-amber-50 p-4 text-sm text-slate-800 space-y-3">
    <div class="flex items-start gap-3">
      <div class="mt-0.5 text-lg">‚ö†Ô∏è</div>
      <div class="space-y-2">
        <div class="font-semibold text-amber-900">
          Responsibility & Production Safety Notice
        </div>

        <p class="text-slate-800">
          This Terminal provides an interactive shell. Commands you run here execute using the
          credentials, permissions, region, and environment currently available to this application.
        </p>

        <ul class="list-disc list-outside pl-5 space-y-1 text-slate-800">
          <li>
            <strong>You are responsible</strong> for every command you execute and the resulting changes.
          </li>
          <li>
            Commands may <strong>modify</strong> or <strong>destroy</strong> AWS resources and can cause outages,
            data loss, or unexpected costs if used incorrectly.
          </li>
          <li>
            The application does <strong>not</strong> guarantee safety, prevent destructive actions, or validate
            correctness of your commands.
          </li>
          <li>
            If you are unsure, start with <strong>verification commands</strong> (read-only) before running any
            change or delete operation.
          </li>
        </ul>

        <p class="text-slate-700">
          <strong>Best practice:</strong> confirm the active AWS account and region before running commands,
          and prefer read-only inspection during investigations.
        </p>
      </div>
    </div>
  </div>

  <!-- ================= AWS VERIFICATION PLAYBOOKS ================= -->
  <details class="rounded-lg border border-slate-200 bg-white p-4 text-sm" open>
    <summary class="cursor-pointer font-semibold text-slate-800">
      üîç AWS Verification Playbooks (Read-Only)
    </summary>

    <div class="mt-4 space-y-6">

      <!-- IDENTITY & CONTEXT -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3" open>
        <summary class="cursor-pointer font-semibold text-slate-800">üßæ Identity &amp; Execution Context</summary>
        <div class="mt-3">
          <p class="text-slate-600 text-sm mb-2">
            Always confirm who you are and where commands will run before doing anything else.
          </p>

          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-slate-100 text-slate-700">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">Purpose</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr class="bg-white">
                <td class="px-3 py-2 font-mono text-indigo-700">aws sts get-caller-identity</td>
                <td class="px-3 py-2">Shows AWS account ID, user/role, and confirms active credentials.</td>
              </tr>
              <tr class="bg-slate-50">
                <td class="px-3 py-2 font-mono text-indigo-700">aws configure list</td>
                <td class="px-3 py-2">Displays active region, credentials source, and configuration scope.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

      <!-- ALARMS -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3">
        <summary class="cursor-pointer font-semibold text-slate-800">üö® CloudWatch Alarms</summary>
        <div class="mt-3">
          <p class="text-slate-600 text-sm mb-2">
            Verify alarm states, recent triggers, and whether alarms reflect real issues.
          </p>

          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-red-50 text-red-700">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">What it tells you</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr>
                <td class="px-3 py-2 font-mono text-red-700">aws cloudwatch describe-alarms --output table</td>
                <td class="px-3 py-2">Lists all alarms and their current states (OK / ALARM / INSUFFICIENT_DATA).</td>
              </tr>
              <tr class="bg-red-50">
                <td class="px-3 py-2 font-mono text-red-700">aws cloudwatch describe-alarms --state-value ALARM --output table</td>
                <td class="px-3 py-2">Shows only alarms currently firing ‚Äî useful during incidents.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

      <!-- LOGS -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3">
        <summary class="cursor-pointer font-semibold text-slate-800">üìú Logs</summary>
        <div class="mt-3">
          <p class="text-slate-600 text-sm mb-2">
            Confirm log presence, freshness, and whether applications are emitting data.
          </p>

          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-emerald-50 text-emerald-700">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">Purpose</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr>
                <td class="px-3 py-2 font-mono text-emerald-700">aws logs describe-log-groups --output table</td>
                <td class="px-3 py-2">Lists available log groups and retention settings.</td>
              </tr>
              <tr class="bg-emerald-50">
                <td class="px-3 py-2 font-mono text-emerald-700">aws logs tail &lt;LOG_GROUP&gt; --since 15m --follow</td>
                <td class="px-3 py-2">Streams recent logs in real time for live troubleshooting.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

      <!-- NETWORKING -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3">
        <summary class="cursor-pointer font-semibold text-slate-800">üåê Networking &amp; Routing</summary>
        <div class="mt-3">
          <p class="text-slate-600 text-sm mb-2">
            Validate VPC topology, routing paths, and gateway attachments.
          </p>

          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-blue-50 text-blue-700">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">Use case</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr>
                <td class="px-3 py-2 font-mono text-blue-700">aws ec2 describe-vpcs --output table</td>
                <td class="px-3 py-2">Confirms VPC existence and CIDR ranges.</td>
              </tr>
              <tr class="bg-blue-50">
                <td class="px-3 py-2 font-mono text-blue-700">aws ec2 describe-subnets --output table</td>
                <td class="px-3 py-2">Shows subnet CIDRs, AZ placement, and availability.</td>
              </tr>
              <tr>
                <td class="px-3 py-2 font-mono text-blue-700">aws ec2 describe-route-tables --output table</td>
                <td class="px-3 py-2">Verifies routing paths and default routes.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

      <!-- METRICS -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3">
        <summary class="cursor-pointer font-semibold text-slate-800">üìà Metrics (CloudWatch)</summary>
        <div class="mt-3">
          <p class="text-slate-600 text-sm mb-2">
            Validate that metrics exist, are updating, and represent real system behavior.
            Metrics can lag, aggregate, or disappear due to permissions or agent issues.
          </p>

          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-purple-50 text-purple-700">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">What it verifies</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr>
                <td class="px-3 py-2 font-mono text-purple-700">aws cloudwatch list-metrics --output table</td>
                <td class="px-3 py-2">Confirms available metrics and namespaces in the current region.</td>
              </tr>
              <tr class="bg-purple-50">
                <td class="px-3 py-2 font-mono text-purple-700">
                  aws cloudwatch get-metric-statistics \\
                  --metric-name CPUUtilization \\
                  --namespace AWS/EC2 \\
                  --statistics Average \\
                  --period 300 \\
                  --start-time $(date -u -v-30M +%Y-%m-%dT%H:%M:%SZ) \\
                  --end-time $(date -u +%Y-%m-%dT%H:%M:%SZ)
                </td>
                <td class="px-3 py-2">Retrieves raw metric data to confirm graphs reflect actual values.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

      <!-- COMPUTE -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3">
        <summary class="cursor-pointer font-semibold text-slate-800">üñ•Ô∏è Compute (EC2 Instances)</summary>
        <div class="mt-3">
          <p class="text-slate-600 text-sm mb-2">
            Determine whether an issue is AWS-level, OS-level, or application-level by checking instance state and health checks.
          </p>

          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-cyan-50 text-cyan-700">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">Operational insight</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr>
                <td class="px-3 py-2 font-mono text-cyan-700">aws ec2 describe-instances --output table</td>
                <td class="px-3 py-2">Lists instances, states, AZ placement, and attached networking.</td>
              </tr>
              <tr class="bg-cyan-50">
                <td class="px-3 py-2 font-mono text-cyan-700">aws ec2 describe-instance-status --include-all-instances --output table</td>
                <td class="px-3 py-2">Shows system and instance status checks ‚Äî critical for outage diagnosis.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

      <!-- BILLING -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3">
        <summary class="cursor-pointer font-semibold text-slate-800">üí∞ Billing &amp; Cost Awareness</summary>
        <div class="mt-3">
          <p class="text-slate-600 text-sm mb-2">
            Unexpected cost increases often accompany misconfigurations, runaway resources, or forgotten infrastructure. Always validate costs during incidents.
          </p>

          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-yellow-50 text-yellow-800">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">What it helps detect</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr>
                <td class="px-3 py-2 font-mono text-yellow-800">
                  aws ce get-cost-and-usage \\
                  --time-period Start=$(date -u -v-7d +%Y-%m-%d),End=$(date -u +%Y-%m-%d) \\
                  --granularity DAILY \\
                  --metrics BlendedCost
                </td>
                <td class="px-3 py-2">Identifies daily cost spikes and abnormal spending patterns.</td>
              </tr>
              <tr class="bg-yellow-50">
                <td class="px-3 py-2 font-mono text-yellow-800">
                  aws ce get-cost-and-usage \\
                  --time-period Start=$(date -u -v-30d +%Y-%m-%d),End=$(date -u +%Y-%m-%d) \\
                  --granularity MONTHLY \\
                  --metrics UnblendedCost
                </td>
                <td class="px-3 py-2">Confirms month-level spending trends and baseline costs.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

      <!-- TROUBLESHOOTING -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3">
        <summary class="cursor-pointer font-semibold text-slate-800">üßØ Troubleshooting &amp; Diagnostics</summary>
        <div class="mt-3">
          <p class="text-slate-600 text-sm mb-2">
            Use these commands to investigate permissions issues, failed API calls, and recent infrastructure changes.
          </p>

          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-rose-50 text-rose-700">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">Diagnostic value</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr>
                <td class="px-3 py-2 font-mono text-rose-700">aws cloudtrail lookup-events --max-results 10</td>
                <td class="px-3 py-2">Reveals recent API calls that may have triggered changes or failures.</td>
              </tr>
              <tr class="bg-rose-50">
                <td class="px-3 py-2 font-mono text-rose-700">aws iam get-account-summary</td>
                <td class="px-3 py-2">Detects IAM constraints that could block operations or automation.</td>
              </tr>
              <tr>
                <td class="px-3 py-2 font-mono text-rose-700">aws service-quotas list-service-quotas --service-code ec2</td>
                <td class="px-3 py-2">Identifies quota limits that can silently block scaling or provisioning.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

    </div>
  </details>

  <!-- ================= ANSIBLE VERIFICATION (FOLDABLE) ================= -->
  <details class="rounded-lg border border-slate-200 bg-white p-4 text-sm">
    <summary class="cursor-pointer font-semibold text-slate-800">
      ü§ñ Ansible Verification (Read-Only)
    </summary>

    <div class="mt-4 space-y-6">
      <p class="text-slate-600 text-sm">
        Use Ansible in inspection mode to understand inventory, variables, facts, and intended changes
        <strong>without modifying systems</strong>.
      </p>

      <!-- INVENTORY -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3" open>
        <summary class="cursor-pointer font-semibold text-slate-800">üì¶ Inventory Inspection</summary>
        <div class="mt-3">
          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-slate-100 text-slate-700">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">What it shows</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr>
                <td class="px-3 py-2 font-mono text-indigo-700">ansible-inventory --list</td>
                <td class="px-3 py-2">Full resolved inventory with groups, hosts, and variables.</td>
              </tr>
              <tr class="bg-slate-50">
                <td class="px-3 py-2 font-mono text-indigo-700">ansible-inventory --graph</td>
                <td class="px-3 py-2">Visual group hierarchy ‚Äî useful for understanding targeting.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

      <!-- FACTS -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3">
        <summary class="cursor-pointer font-semibold text-slate-800">üß† Facts Gathering</summary>
        <div class="mt-3">
          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-emerald-50 text-emerald-700">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">Purpose</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr>
                <td class="px-3 py-2 font-mono text-emerald-700">ansible all -m setup</td>
                <td class="px-3 py-2">Collects system facts (OS, CPU, memory, network) for validation.</td>
              </tr>
              <tr class="bg-emerald-50">
                <td class="px-3 py-2 font-mono text-emerald-700">ansible &lt;group&gt; -m setup -a "filter=ansible_distribution*"</td>
                <td class="px-3 py-2">Confirms OS distribution consistency across a group.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

      <!-- DRY RUN -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3">
        <summary class="cursor-pointer font-semibold text-slate-800">üß™ Dry Run (No Changes)</summary>
        <div class="mt-3">
          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-blue-50 text-blue-700">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">Operational meaning</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr>
                <td class="px-3 py-2 font-mono text-blue-700">ansible-playbook site.yml --check</td>
                <td class="px-3 py-2">Simulates changes and reports what <em>would</em> be modified.</td>
              </tr>
              <tr class="bg-blue-50">
                <td class="px-3 py-2 font-mono text-blue-700">ansible-playbook site.yml --check --diff</td>
                <td class="px-3 py-2">Shows before/after diffs for files and templates.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>

      <!-- ANSIBLE TROUBLESHOOTING -->
      <details class="rounded-md border border-slate-200 bg-slate-50 p-3">
        <summary class="cursor-pointer font-semibold text-slate-800">üßØ Ansible Troubleshooting</summary>
        <div class="mt-3">
          <table class="w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
            <thead class="bg-rose-50 text-rose-700">
              <tr>
                <th class="px-3 py-2 text-left">Command</th>
                <th class="px-3 py-2 text-left">Why it helps</th>
              </tr>
            </thead>
            <tbody class="divide-y">
              <tr>
                <td class="px-3 py-2 font-mono text-rose-700">ansible all -m ping</td>
                <td class="px-3 py-2">Verifies connectivity, authentication, and Python availability.</td>
              </tr>
              <tr class="bg-rose-50">
                <td class="px-3 py-2 font-mono text-rose-700">ansible-playbook site.yml -vvv</td>
                <td class="px-3 py-2">Provides verbose execution context for diagnosing failures.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </details>
    </div>
  </details>

  <!-- ================= SHELL SCAFFOLD (V2: UI ONLY) ================= -->
  <div class="rounded-lg border border-slate-200 bg-white">
    <div class="flex items-center justify-between border-b border-slate-200 px-3 py-2">
      <div class="text-sm font-medium text-slate-800">Shell</div>
      <div class="text-xs text-slate-500">Execution disabled (Terminal v2 UI scaffold)</div>
    </div>

    <div class="p-3 space-y-3">
      <div class="rounded-md border border-amber-200 bg-amber-50 p-3 text-sm text-slate-800">
        ‚ö†Ô∏è Shell UI only. Execution is not enabled in this version. This space will be wired to the Terminal v2
        allow-list runner in a later phase.
      </div>

      <div class="rounded-md border border-slate-200 bg-slate-950 p-3 text-slate-100">
        <div class="flex items-center justify-between mb-2">
          <div class="text-xs font-mono text-slate-300">netpilot-terminal</div>
          <div class="text-xs text-slate-400">v2 (disabled)</div>
        </div>

        <textarea
          class="w-full h-64 resize-y rounded-md bg-slate-900 border border-slate-700 p-3 font-mono text-sm text-slate-100 focus:outline-none focus:ring-2 focus:ring-slate-500"
          placeholder="$ aws sts get-caller-identity"
          disabled
        ></textarea>

        <div class="mt-2 text-xs font-mono text-slate-400">
          # Output will appear here once execution is enabled.
        </div>
      </div>
    </div>
  </div>

</div>
<!-- =============== END TERMINAL SECTION =============== -->
